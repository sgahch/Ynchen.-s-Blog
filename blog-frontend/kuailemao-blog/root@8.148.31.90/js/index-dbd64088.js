import{A as I,r as v,B as M,Q as k,o as B,c as R,l as d,q as t,y as a,u as p,x as f,t as $,U as A,E as i,as as h,H as q,ax as N,J as Z,I as F,K,ay as L,at as P,aK as T,aL as x,aM as j,aN as D}from"./.pnpm-a60ec0da.js";import{s as H}from"./index-2137e392.js";import{j as J}from"./index-f983387b.js";const Q={style:{"text-align":"center",margin:"0 20px"}},S={style:{"margin-top":"50px"}},G={style:{"margin-top":"80px"}},O={style:{"margin-top":"20px"}},le=I({__name:"index",setup(W){const n=v(0),_=v(),y=A(),l=M({username:"",password:"",password_repeat:"",email:"",code:""}),V={username:[{validator:(s,e,o)=>{e?/^[a-zA-Z0-9\u4e00-\u9fa5]+$/.test(e)?o():o(new Error("用户名不能包含特殊字符，只能是中/英文")):o(new Error("请输入用户名"))},trigger:["blur","change"]}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"密码的长度必须在 6-20 个字符之间",trigger:["blur","change"]}],password_repeat:[{validator:(s,e,o)=>{e?e!==l.password?o(new Error("两次输入的密码不一致")):o():o(new Error("请再次输入密码"))},trigger:["blur","change"]}],email:[{required:!0,message:"请输入邮件地址",trigger:"blur"},{type:"email",message:"请输入合法的电子邮件地址",trigger:["blur","change"]}],code:[{required:!0,message:"请从你的 垃圾邮箱 获取验证码",trigger:"blur"}]},E=()=>{if(!g.value){i.warning("请输入正确的电子邮件");return}n.value=60,H(l.email,"register").then(s=>{if(s.code===200){i.success(`验证码已发送到邮箱：${l.email}，请注意查收`);const e=setInterval(()=>{n.value<=0?clearInterval(e):n.value--},1e3)}else i.warning(s.msg),n.value=0})},g=k(()=>/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(l.email)),U=()=>{_.value.validate(s=>{s?J(l).then(e=>{e.code===200?(i.success("注册成功，欢迎加入我们"),y.replace("/login")):i.warning(e.msg)}):i.warning("请完整填写注册表单内容")})};return(s,e)=>{const o=h,u=q,m=N,c=Z,w=F,b=K,z=L,C=P;return B(),R("div",Q,[e[9]||(e[9]=d("div",{style:{"margin-top":"100px"}},[d("div",{style:{"font-size":"25px","font-weight":"bold"}},"注册新用户"),d("div",{style:{"font-size":"14px",color:"grey","margin-top":"1rem"}}," 欢迎注册我们的学习平台，请在下方填写相关信息 ")],-1)),d("div",S,[t(z,{model:l,rules:V,ref_key:"formRef",ref:_},{default:a(()=>[t(m,{prop:"username"},{default:a(()=>[t(u,{modelValue:l.username,"onUpdate:modelValue":e[0]||(e[0]=r=>l.username=r),modelModifiers:{trim:!0},maxlength:"10",placeholder:"用户名"},{prefix:a(()=>[t(o,null,{default:a(()=>[t(p(T))]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(m,{prop:"password"},{default:a(()=>[t(u,{modelValue:l.password,"onUpdate:modelValue":e[1]||(e[1]=r=>l.password=r),modelModifiers:{trim:!0},type:"password",maxlength:"20",placeholder:"密码"},{prefix:a(()=>[t(o,null,{default:a(()=>[t(p(x))]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(m,{prop:"password_repeat"},{default:a(()=>[t(u,{modelValue:l.password_repeat,"onUpdate:modelValue":e[2]||(e[2]=r=>l.password_repeat=r),modelModifiers:{trim:!0},type:"password",maxlength:"20",placeholder:"重复密码"},{prefix:a(()=>[t(o,null,{default:a(()=>[t(p(x))]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(m,{prop:"email"},{default:a(()=>[t(u,{modelValue:l.email,"onUpdate:modelValue":e[3]||(e[3]=r=>l.email=r),modelModifiers:{trim:!0},type:"email",placeholder:"电子邮件地址"},{prefix:a(()=>[t(o,null,{default:a(()=>[t(p(j))]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(m,{prop:"code"},{default:a(()=>[t(b,{gutter:10,style:{width:"100%"}},{default:a(()=>[t(c,{span:17},{default:a(()=>[t(u,{modelValue:l.code,"onUpdate:modelValue":e[4]||(e[4]=r=>l.code=r),modelModifiers:{trim:!0},maxlength:"6",placeholder:"请输入验证码"},{prefix:a(()=>[t(o,null,{default:a(()=>[t(p(D))]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(c,{span:5},{default:a(()=>[t(w,{type:"success",onClick:E,disabled:!g.value||n.value!==0},{default:a(()=>[f($(n.value>0?`请稍后 ${n.value} 秒`:"获取验证码"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),d("div",G,[t(w,{type:"warning",style:{width:"270px"},plain:"",onClick:U},{default:a(()=>e[6]||(e[6]=[f(" 立即注册 ")])),_:1})]),d("div",O,[e[8]||(e[8]=d("span",{style:{"font-size":"14px",color:"grey"}},"已有账号?",-1)),t(C,{style:{translate:"0 -1px"},onClick:e[5]||(e[5]=r=>s.$router.replace("/login"))},{default:a(()=>e[7]||(e[7]=[f(" 立即登录 ")])),_:1})])])}}});export{le as default};
