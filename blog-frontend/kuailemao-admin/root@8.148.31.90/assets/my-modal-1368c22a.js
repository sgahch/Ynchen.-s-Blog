import{t as N,n as C,q as O,s as R,_ as T}from"./index-2a334394.js";import{m as p,X as q,Y as H,x as J,aB as L,aG as X,aH as Y,aI as Q,aJ as W,af as Z,U as ee,al as ae}from"./antd-a1128520.js";import{d as te,j as x,r as y,w as ne,a1 as le,a5 as oe,c as l,a3 as o,u as r,E as _,a8 as w,m as ue,a6 as se,a7 as de}from"./vue-5b89248e.js";async function he(){return N("/role/list",null).catch(t=>p.warn(t))}async function ke(t,s){return C("/role/update/status",{id:t,status:s})}async function ge(t){return N(`/role/get/${t}`,null).catch(s=>p.warn(s))}async function re(t){return O("/role/update",t).catch(s=>p.warn(s))}async function ce(t){return O("/role/add",t).catch(s=>p.warn(s))}async function be(t){return R("/role/delete",{ids:t}).catch(s=>p.warn(s))}async function xe(t){return C("/role/search",t).catch(s=>p.warn(s))}const E=t=>(se("data-v-d6ebac5a"),t=t(),de(),t),ie=E(()=>w("span",{style:{"font-size":"0.9em"}}," 菜单的顺序，由小到大 ",-1)),pe=E(()=>w("span",null,"显示排序",-1)),me=te({__name:"my-modal",props:{open:Boolean,title:String,treeData:Array,formData:Object},emits:["update:close"],setup(t,{emit:s}){const f=t,I=s,h=x(()=>f.open),U=x(()=>D(f.treeData));function D(n){return n.map(e=>{let i;return i=i={key:e.id,title:e.title,children:[]},e.children&&e.children.length>0&&(i.children=D(e.children)),i})}const u=x(()=>f.formData),v=y([]),c=y([]),k=y(!0),d=y({a1:void 0,a2:void 0,a3:void 0});function M(){d.value={a1:void 0,a2:void 0,a3:void 0},I("update:close")}async function j(){var e;let n={};((e=c.value.checked)==null?void 0:e.length)>0?n=Object.assign({},u.value,{menuIds:c.value.checked}):n=Object.assign({},u.value,{menuIds:c.value}),n&&n.id?(await re(n)).code===200&&p.success("修改成功"):(await ce(n)).code===200&&p.success("添加成功"),I("update:close")}function g(n){n==="a1"&&d.value.a1?v.value=U.value.map(e=>e.key):n==="a1"&&!d.value.a1&&(v.value=[]),n==="a2"&&d.value.a2?(c.value=[],K(U.value)):n==="a2"&&!d.value.a2&&(c.value=[]),n==="a3"&&d.value.a3?k.value=!1:n==="a3"&&!d.value.a3&&(k.value=!0)}function K(n){n.forEach(e=>{c.value.push(e.key),e.children&&K(e.children)})}function B(n){v.value=n}return ne(u,()=>{u.value.menuIds?c.value=u.value.menuIds:c.value=[]}),(n,e)=>{const i=q,m=H,$=J,P=L,S=X,V=Y,b=Q,z=W,A=Z,F=ee,G=ae;return le(),oe("div",null,[l(G,{open:r(h),"onUpdate:open":e[13]||(e[13]=a=>ue(h)?h.value=a:null),title:f.title,onOk:j,onCancel:M},{default:o(()=>[l(F,null,{default:o(()=>[l(m,{label:"角色名称",name:"name",style:{"margin-top":"2rem"}},{default:o(()=>[l(i,{value:r(u).roleName,"onUpdate:value":e[0]||(e[0]=a=>r(u).roleName=a),placeholder:"请输入角色名称"},null,8,["value"])]),_:1}),l(m,{label:"权限字符",name:"name"},{default:o(()=>[l(i,{value:r(u).roleKey,"onUpdate:value":e[1]||(e[1]=a=>r(u).roleKey=a),placeholder:"请输入权限字符"},null,8,["value"])]),_:1}),l(m,{style:{width:"120px"}},{label:o(()=>[l($,{placement:"top"},{title:o(()=>[ie]),default:o(()=>[pe]),_:1})]),default:o(()=>[l(P,{id:"inputNumber",value:r(u).orderNum,"onUpdate:value":e[2]||(e[2]=a=>r(u).orderNum=a),min:0,max:10},null,8,["value"])]),_:1}),l(m,{label:"状态",name:"status"},{default:o(()=>[l(V,{value:r(u).status,"onUpdate:value":e[3]||(e[3]=a=>r(u).status=a)},{default:o(()=>[l(S,{value:0},{default:o(()=>[_(" 启用 ")]),_:1}),l(S,{value:1},{default:o(()=>[_(" 禁用 ")]),_:1})]),_:1},8,["value"])]),_:1}),l(m,null,{label:o(()=>[_(" 菜单权限 ")]),default:o(()=>[w("div",null,[l(b,{checked:d.value.a1,"onUpdate:checked":e[4]||(e[4]=a=>d.value.a1=a),style:{"margin-right":"20px"},onChange:e[5]||(e[5]=a=>g("a1"))},{default:o(()=>[_(" 展开/折叠 ")]),_:1},8,["checked"]),l(b,{checked:d.value.a2,"onUpdate:checked":e[6]||(e[6]=a=>d.value.a2=a),style:{"margin-right":"20px"},onChange:e[7]||(e[7]=a=>g("a2"))},{default:o(()=>[_(" 全选/全不选 ")]),_:1},8,["checked"]),l(b,{checked:d.value.a3,"onUpdate:checked":e[8]||(e[8]=a=>d.value.a3=a),onChange:e[9]||(e[9]=a=>g("a3"))},{default:o(()=>[_(" 父子联动 ")]),_:1},8,["checked"])])]),_:1}),l(z,{expandedKeys:v.value,"onUpdate:expandedKeys":e[10]||(e[10]=a=>v.value=a),checkedKeys:c.value,"onUpdate:checkedKeys":e[11]||(e[11]=a=>c.value=a),"check-strictly":k.value,checkable:"","block-node":"","tree-data":t.treeData,style:{border:"1px solid #E5E6E7","margin-left":"70px"},onExpand:B},null,8,["expandedKeys","checkedKeys","check-strictly","tree-data"]),l(m,{label:"备注",style:{"margin-top":"2rem"}},{default:o(()=>[l(A,{value:r(u).remark,"onUpdate:value":e[12]||(e[12]=a=>r(u).remark=a),"show-count":"",maxlength:100},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["open","title"])])}}});const _e=T(me,[["__scopeId","data-v-d6ebac5a"]]),we=Object.freeze(Object.defineProperty({__proto__:null,default:_e},Symbol.toStringTag,{value:"Module"}));export{_e as M,xe as a,ke as b,be as c,ge as d,we as m,he as r};
