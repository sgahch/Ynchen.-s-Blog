import{i as N,a as b,u as I,c as S,b as W,d as $,_ as A}from"./index-9112a7eb.js";import{a as T,_ as j}from"./index-f983387b.js";import{A as q,ao as P,r as d,f as R,o as p,c as z,l as t,q as l,y as G,x as H,u as a,t as c,k as v,v as _,D as J,j as K,a2 as O,E as i,at as Q,ab as U,ak as X,av as Y,aw as Z}from"./.pnpm-a60ec0da.js";import{g as ee}from"./index-1b82d93e.js";const ne={class:"user"},ae={class:"detail"},te={class:"name"},oe={class:"time"},se={class:"content"},le={class:"container"},ie={class:"count"},ue=q({__name:"index",setup(ce){const k=P(),e=d([]),h=O(),f=d(!1),o=d(!1),s=d(!1);R(()=>{g()});function g(){ee(h.params.id).then(n=>{e.value=n.data[0],f.value=!0,C(),x()})}function C(){N(3,e.value.id).then(n=>{o.value=n.code===200})}function F(){o.value?L():w()}function w(){o.value||I(3,e.value.id).then(n=>{n.code===200?(e.value.likeCount++,o.value=!0,i.success("点赞成功")):(o.value=!1,i.warning(n.msg))})}function L(){o.value&&S(3,e.value.id).then(n=>{n.code===200?(e.value.likeCount--,o.value=!1):(o.value=!0,i.warning(n.msg))})}function x(){b(2,e.value.id).then(n=>{s.value=n.data===!0})}function y(){s.value?V():E()}function E(){s.value||W(2,e.value.id).then(n=>{n.code===200?(e.value.favoriteCount++,s.value=!0,i.success("收藏成功")):(s.value=!1,i.warning(n.msg))})}function V(){s.value&&$(2,e.value.id).then(n=>{n.code===200?(e.value.favoriteCount--,s.value=!1):(s.value=!0,i.warning(n.msg))})}return(n,r)=>{const B=Q,m=U,D=X,u=T,M=A;return p(),z("div",null,[t("div",null,[l(B,{icon:a(Y),onClick:r[0]||(r[0]=re=>n.$router.push("/message"))},{default:G(()=>r[1]||(r[1]=[H("回到留言列表")])),_:1},8,["icon"]),l(m)]),t("div",ne,[t("span",null,[l(D,{src:a(e).avatar},null,8,["src"])]),t("div",ae,[t("span",te,c(a(e).nickname),1),t("span",oe,c(a(e).createTime),1)])]),t("div",se,[l(a(Z),{modelValue:a(e).content,theme:a(k)},null,8,["modelValue","theme"])]),t("div",le,[t("div",ie,[t("div",null,[l(u,{name:"comments"}),t("span",null,c(a(e).commentCount),1)]),t("div",{onClick:F},[v(l(u,{name:"like"},null,512),[[_,!a(o)]]),v(l(u,{name:"like-selected"},null,512),[[_,a(o)]]),t("span",null,c(a(e).likeCount),1)]),t("div",{onClick:y},[v(l(u,{name:"collection"},null,512),[[_,!a(s)]]),v(l(u,{name:"collection-selected"},null,512),[[_,a(s)]]),t("span",null,c(a(e).favoriteCount),1)])])]),l(m,{"content-position":"left"}),a(f)?(p(),J(M,{key:0,type:2,"like-type":2,"author-id":a(e).userId,"type-id":a(e).id,"is-show-header":!0},null,8,["author-id","type-id"])):K("",!0)])}}});const me=j(ue,[["__scopeId","data-v-a840f9ae"]]);export{me as default};
