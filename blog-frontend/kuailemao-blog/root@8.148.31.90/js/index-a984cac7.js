import{A as I,ao as S,r as u,f as q,a5 as M,o as m,c as h,l as e,q as s,y as o,x as c,u as a,aj as y,t as r,F as N,p as T,E as p,I as A,ab as R,ap as U,aq as j,k as z,D as H,ar as G,ak as J,as as K,at as O,au as P}from"./.pnpm-a60ec0da.js";import{a as Q,_ as X}from"./index-f983387b.js";import{g as Y,u as Z}from"./index-1b82d93e.js";const ee={class:"bg"},ne={class:"title"},te={style:{height:"100%",display:"flex","align-items":"center"}},se={style:{margin:"0 1rem"}},le={style:{"margin-top":"1rem",float:"right"}},oe={class:"form"},ae={class:"card-header"},ie={class:"name"},re={class:"time"},de={class:"text"},ue={class:"bottom"},ce={class:"count"},pe=I({__name:"index",setup(ve){const w=S(),d=u(!1),i=u(""),f=u([]);q(()=>{g()});function g(){Y().then(l=>{f.value=l.data.map(n=>(n.content=n.content.replace(/[*#>`~\-\\[\]()\s]|(\n\n)/g,""),n.content.length>35&&(n.content=n.content.substring(0,35)+"..."),n))})}const b=()=>{if(i.value===""){p.warning("请输入留言内容");return}Z(i.value).then(l=>{l.code===200?(p.success("留言成功"),d.value=!1,g()):p.error(l.msg)})},C=u(["bold","underline","italic","title","strikeThrough","quote","unorderedList","orderedList","task","codeRow","code","link","image","table","pageFullscreen","preview","catalog"]),x=[0,1,"=","scrollSwitch"],k=u(0);function L(l){l.length>2e3&&(l=l.slice(0,2e3),p.warning("字数超过限制，自动截取前2000字")),i.value=l,console.log(i.value),k.value=l.length}return(l,n)=>{const v=A,E=R,V=U,D=J,_=Q,$=K,B=O,F=P,W=M("slide-in");return m(),h("div",ee,[n[12]||(n[12]=e("div",{class:"occupancyHeight"},null,-1)),e("div",null,[e("div",ne,[n[5]||(n[5]=e("div",null,"留言板",-1)),s(v,{type:"primary",plain:"",onClick:n[0]||(n[0]=t=>d.value=!0)},{default:o(()=>n[4]||(n[4]=[c("留言")])),_:1})]),s(E),n[9]||(n[9]=e("div",{class:"title_content"},[e("span",null,"欢迎访问留言板板块！"),e("span",null,"留言板是一个方便与其他用户交流、分享观点和意见的平台。通过留言板，您可以："),e("span",null,"1、留下自己的留言：无论是对特定主题的讨论、对某篇文章的评论，还是向其他用户提问，您都可以在留言板上发表自己的留言。"),e("span",null,"2、回复其他用户：看到其他用户的留言后，您可以进行回复和互动，分享自己的观点，提供帮助或者表达共鸣。"),e("span",null,"3、进行在线交流：留言板不仅是一个留言的平台，还是一个与其他用户进行实时交流的地方。您可以通过留言板与他人进行私聊，分享更多的讨论和信息。"),e("span",null,"支持：普通文档，markdown")],-1)),e("div",null,[s(V,{size:"45%",modelValue:a(d),"onUpdate:modelValue":n[3]||(n[3]=t=>y(d)?d.value=t:null),direction:"rtl","with-header":!1},{default:o(()=>[e("div",null,[s(a(j),{theme:a(w),style:{height:"90vh"},footers:x,modelValue:a(i),"onUpdate:modelValue":n[1]||(n[1]=t=>y(i)?i.value=t:null),toolbars:a(C),"no-upload-img":"",preview:!1,"on-change":L},{defFooters:o(()=>[e("div",te,[e("span",se,"字数："+r(a(k)),1),n[6]||(n[6]=e("span",null,"字数限制：2000",-1))])]),_:1},8,["theme","modelValue","toolbars"]),e("div",le,[s(v,{type:"primary",onClick:b,plain:""},{default:o(()=>n[7]||(n[7]=[c("提交")])),_:1})]),e("div",{style:{"margin-top":"1rem","margin-right":"1rem",float:"right"},onClick:n[2]||(n[2]=t=>d.value=!1)},[s(v,{type:"warning",plain:""},{default:o(()=>n[8]||(n[8]=[c("关闭")])),_:1})])])]),_:1},8,["modelValue"])])]),e("div",null,[n[11]||(n[11]=e("div",{class:"title"},"留言列表",-1)),e("div",oe,[(m(!0),h(N,null,T(a(f),t=>z((m(),H(F,{class:"box-card",shadow:"hover"},{header:o(()=>[e("div",ae,[e("span",null,[s(D,{src:t.avatar},null,8,["src"])]),e("span",ie,r(t.nickname),1),e("span",re,r(t.createTime),1)])]),default:o(()=>[e("div",de,r(t.content),1),e("div",ue,[e("div",ce,[e("div",null,[s(_,{name:"comments"}),e("span",null,r(t.commentCount),1)]),e("div",null,[s(_,{name:"like"}),e("span",null,r(t.likeCount),1)]),e("div",null,[s(_,{name:"collection"}),e("span",null,r(t.favoriteCount),1)])]),e("div",null,[s(B,{type:"primary",onClick:_e=>l.$router.push(`/message/detail/${t.id}`)},{icon:o(()=>[s($,null,{default:o(()=>[s(a(G))]),_:1})]),default:o(()=>[n[10]||(n[10]=c(" 查看详情 "))]),_:2},1032,["onClick"])])])]),_:2},1024)),[[W]])),256))])])])}}});const ke=X(pe,[["__scopeId","data-v-b14ec408"]]);export{ke as default};
