import{t as d,n as h,s as D,v as U,_ as j}from"./index-2a334394.js";import{m as s,X as C,Y as I,y as k,af as A,U as B,al as L}from"./antd-a1128520.js";import{d as S,j as y,r as K,w as $,a1 as z,a5 as E,c as l,a3 as p,u as r,m as F}from"./vue-5b89248e.js";async function q(){return d("/permission/list",null).catch(e=>s.warn(e))}async function H(e,t,c){return d("/permission/search",null,{params:{permissionDesc:e,permissionKey:t,permissionMenuId:c}}).catch(u=>s.warn(u))}async function J(){return d("/permission/menu",null).catch(e=>s.warn(e))}function G(e){return h("/permission/add",e).catch(t=>s.warn(t))}function N(e){return h("/permission/update",e).catch(t=>s.warn(t))}function Q(e){return d(`/permission/get/${e}`).catch(t=>s.warn(t))}function W(e){return D(`/permission/delete/${e}`).catch(t=>s.warn(t))}const R=S({__name:"my-modal",props:{open:Boolean,title:String,formData:Object},emits:["update:close","update:refresh-func"],setup(e,{emit:t}){const c=e,u=t,m=y(()=>c.open),v=K([]);$(m,async()=>{const{data:o}=await U(1);o&&o.length>0&&(v.value=o.map(n=>({value:n.id,label:n.title})))});const a=y(()=>c.formData);function g(){u("update:close")}async function w(){a.value.id&&a.value.id>0?(await N(a.value)).code===200&&(s.success("修改成功"),u("update:refresh-func")):(await G(a.value)).code===200&&(s.success("新增成功"),u("update:refresh-func")),u("update:close")}function M(o,n){return Array.from(o).some(_=>Array.from(n.label).includes(_))}return(o,n)=>{const _=C,f=I,b=k,x=A,O=B,P=L;return z(),E("div",null,[l(P,{open:r(m),"onUpdate:open":n[3]||(n[3]=i=>F(m)?m.value=i:null),title:c.title,onOk:w,onCancel:g},{default:p(()=>[l(O,null,{default:p(()=>[l(f,{label:"权限字符",name:"name",style:{"margin-top":"2rem"}},{default:p(()=>[l(_,{value:r(a).permissionKey,"onUpdate:value":n[0]||(n[0]=i=>r(a).permissionKey=i),placeholder:"请输入权限字符"},null,8,["value"])]),_:1}),l(f,{label:"权限菜单"},{default:p(()=>[l(b,{value:r(a).permissionMenuId,"onUpdate:value":n[1]||(n[1]=i=>r(a).permissionMenuId=i),"show-search":"",placeholder:"选择所在的菜单",style:{width:"200px"},options:r(v),"filter-option":M},null,8,["value","options"])]),_:1}),l(f,{label:"权限描述",style:{"margin-top":"2rem"}},{default:p(()=>[l(x,{value:r(a).permissionDesc,"onUpdate:value":n[2]||(n[2]=i=>r(a).permissionDesc=i),placeholder:"权限字符该权限的描述","show-count":"",maxlength:100},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["open","title"])])}}});const T=j(R,[["__scopeId","data-v-eed9ec6e"]]),Z=Object.freeze(Object.defineProperty({__proto__:null,default:T},Symbol.toStringTag,{value:"Module"}));export{T as M,q as a,W as d,Q as g,Z as m,J as p,H as s};
