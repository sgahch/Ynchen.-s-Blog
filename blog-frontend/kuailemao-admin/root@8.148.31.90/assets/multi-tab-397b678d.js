import{e as d,u as P,h as r}from"./index-2a334394.js";import{$ as g,r as o,s as x}from"./vue-5b89248e.js";const L=["/login","/404","/403"],E=g("multi-tab",()=>{const t=o([]),f=x(),s=o(null),h=d(),i=o([]),v=P(),m=e=>{if(!e||e.path.startsWith("/redirect")||e.path.startsWith("/common")||e.path==="/"||L.includes(e.path))return;if(s.value&&setTimeout(()=>{s.value&&(s.value.loading=!1,s.value=null)},500),t.value.some(n=>n.fullPath===e.fullPath)){!i.value.includes(e==null?void 0:e.name)&&h.layoutSetting.keepAlive&&e.meta.keepAlive&&e.name&&i.value.push(e.name);return}const l={path:e.path,fullPath:e.fullPath,title:e.meta.title,name:e.name,icon:e.meta.icon,affix:e.meta.affix,locale:e.meta.locale};!i.value.includes(l==null?void 0:l.name)&&h.layoutSetting.keepAlive&&e.meta.keepAlive&&e.name&&i.value.push(e.name),t.value.push(l)},u=e=>{if(t.value.length<=1){v.error("不能关闭最后一个标签页");return}const l=t.value.findIndex(a=>a.fullPath===e);if(l<0){v.error("当前页签不存在无法关闭");return}const n=t.value[l];if(n.fullPath===f.value){const a=l===0?t.value[l+1]:t.value[l-1];f.value=a.fullPath,r.push(a.fullPath)}h.layoutSetting.keepAlive&&n.name&&(i.value=i.value.filter(a=>a!==n.name)),t.value=t.value.filter(a=>a.fullPath!==e)},p=e=>{const l=t.value.find(n=>n.fullPath===e);l&&(i.value=i.value.filter(n=>n!==l.name),l.loading=!0,s.value=l,r.replace(`/redirect/${encodeURIComponent(l.fullPath)}`))},c=e=>{e!==f.value&&r.push(e)};return{list:t,activeKey:f,cacheList:i,close:u,clear:()=>{t.value=[],i.value=[],f.value=void 0,s.value=null},closeLeft:e=>{c(e);const l=t.value.findIndex(a=>a.fullPath===e);t.value.slice(0,l).forEach(a=>{a.affix||u(a.fullPath)})},closeRight:e=>{c(e);const l=t.value.findIndex(a=>a.fullPath===e);t.value.slice(l+1).forEach(a=>{a.affix||u(a.fullPath)})},closeOther:e=>{c(e),t.value.forEach(l=>{l.affix||l.fullPath!==e&&u(l.fullPath)})},refresh:p,switchTab:c,addItem:m}});export{E as u};
