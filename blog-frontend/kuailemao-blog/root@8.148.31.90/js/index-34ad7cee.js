import{A as H,a5 as pe,k as v,o as r,c,l as e,q as o,u as d,aC as Z,Q as ge,y as a,aj as fe,j as w,I as he,ap as ye,aD as Ee,ao as Ce,r as x,w as ke,f as Ie,E as g,aE as xe,v as m,i as Q,t as s,F as B,p as F,x as f,D as be,a2 as Te,an as $e,ab as we,ae as Ae,aF as Ne,at as Be,aG as Se,aw as X}from"./.pnpm-a60ec0da.js";import{t as Ve,a as Re,_ as De}from"./index-adf92767.js";import{_ as Fe}from"./index-77ed39d5.js";import{a as Me,_ as Le,b as Oe,c as Ue}from"./index-cbf17cac.js";import{a as He,i as ze,d as Pe,b as je,c as qe,u as Ye,_ as We}from"./index-9112a7eb.js";import{a as U,_ as z,u as Ge,c as Ke,r as Qe,d as Xe}from"./index-f983387b.js";import{_ as Je}from"./index-898656d3.js";import"./index-ab0906f1.js";const Ze={class:"card px-[10px]"},et={class:"title"},tt={class:"title_text"},lt={class:"min-h-[16em] max-h-[40em] overflow-y-auto"},ot="preview-only",nt=H({__name:"index",setup(M){const y=document.documentElement;return(E,b)=>{const T=U,C=pe("slide-in");return v((r(),c("div",Ze,[e("div",et,[e("div",tt,[o(T,{class:"scale",name:"directory",width:"30",height:"30"}),b[0]||(b[0]=e("span",{style:{"margin-left":"10px"}},"目录",-1))])]),e("div",lt,[o(d(Z),{editorId:ot,scrollElement:d(y)},null,8,["scrollElement"])])])),[[C]])}}});const st=z(nt,[["__scopeId","data-v-6b9c9abb"]]),it={key:0},at={class:"move_catalog"},dt=H({__name:"index",props:{id:{},scrollElement:{},isShowMoveCatalog:{type:Boolean}},emits:["update:isShowMoveCatalog"],setup(M,{emit:y}){const E=M,b=y,T=ge(()=>E.isShowMoveCatalog),C=()=>{b("update:isShowMoveCatalog",!1)};return(l,u)=>{const S=he,A=ye;return l.scrollElement?(r(),c("div",it,[o(A,{modelValue:d(T),"onUpdate:modelValue":u[1]||(u[1]=N=>fe(T)?T.value=N:null),"with-header":!0,size:"60%",direction:"rtl","show-close":!1,"before-close":C},{header:a(()=>[u[2]||(u[2]=e("span",{style:{"font-size":"1.2rem"}},"目录",-1)),o(S,{icon:d(Ee),style:{background:"none","font-size":"1.5rem",width:"30px",border:"none"},onClick:u[0]||(u[0]=N=>C())},null,8,["icon"])]),default:a(()=>[e("div",at,[o(d(Z),{editorId:E.id,scrollElement:E.scrollElement},null,8,["editorId","scrollElement"])])]),_:1},8,["modelValue"])])):w("",!0)}}});const rt=z(dt,[["__scopeId","data-v-9ca980b7"]]),J="article_visit_",ut={class:"p-1"},ct={class:"head_title_text"},_t={class:"classify"},vt={class:"tag"},mt={class:"title"},pt={class:"statistics"},gt={class:"statistics"},ft={class:"time"},ht={style:{display:"flex","align-items":"center"}},yt={class:"copyright"},Et={class:"author"},Ct={class:"link"},kt=["href"],It={class:"license"},xt={style:{display:"flex","justify-content":"space-between"}},bt={class:"tag"},Tt=["onClick"],$t={class:"like"},wt={class:"tag",style:{display:"flex","justify-content":"left"}},At={class:"tipping"},Nt={class:"qrCode"},Bt={class:"goOn"},St={key:0},Vt={key:0},Rt={class:"pre-text"},Dt={class:"sticky_layout"},Ft={class:"mt-[2.5em]"},Mt={key:0},Lt={class:"bg-white dark:bg-gray-800"},Ot={class:"sm:px-1 md:px-[5rem] lg:px-[10rem] xl:px-[15rem] py-3",style:{transition:"all .5s ease"}},Ut={class:"head_title_text"},Ht={class:"classify"},zt={class:"tag"},Pt={class:"title"},jt={class:"statistics"},qt={class:"statistics"},Yt={class:"time"},Wt={style:{display:"flex","align-items":"center"}},Gt={class:"copyright"},Kt={class:"author"},Qt={class:"link"},Xt=["href"],Jt={class:"license"},Zt={style:{display:"flex","justify-content":"space-between"}},el={class:"tag"},tl=["onClick"],ll={class:"like"},ol={class:"tag",style:{display:"flex","justify-content":"left"}},nl={class:"tipping"},sl={class:"qrCode"},il={class:"goOn"},al={key:0},dl={key:0},O="preview-only",rl=H({__name:"index",setup(M){const y={VITE_APP_BASE_API:"/api",VITE_SERVE:"",VITE_FRONTEND_URL:"",VITE_MUSIC_BASE_API:"/wapi",VITE_MUSIC_SERVE:"",VITE_MUSIC_FRONTEND_URL:"",VITE_YIYAN_API:"",VITE_ENABLE_DEV_TOOLSBLOCKER:"true",VITE_USER_NODE_ENV:"production",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},E=Ge(),b=Ce(),T=document.documentElement,C=x(!1),l=x({articleCover:"",articleTitle:"",articleContent:void 0,categoryName:"",categoryId:"",tags:[],visitCount:0,commentCount:0,likeCount:0,favoriteCount:0,createTime:"",updateTime:"",userId:0,id:"0"}),u=Te(),S=x(!1),A=x(0);ke(()=>u.params.id,()=>{N()}),Ie(async()=>{await N()});async function N(){Ke(u.params.id).then(n=>{if(!n.data){g.warning({message:"文章不存在"}),Qe.push({path:"/"});return}xe(n.data.articleTitle),u.params.id&&(sessionStorage.getItem(J+u.params.id)||(sessionStorage.setItem(J+u.params.id,u.params.id),Xe(u.params.id))),n.data.createTime=n.data.createTime.split(" ")[0],n.data.updateTime=n.data.updateTime.split(" ")[0],l.value=n.data,S.value=!0,le(),oe()})}function P(n){const t=n.replace(/<[^>]+>/g,"").replace(/[\r\n]/g,"").replace(/[ ]/g,"").replace(/[\s+\.\!\/_,$%^*(+\"\']+|[+——！，。？、~@#￥%……&*（）]+/g,"");A.value=ee(t.length)}function ee(n){if(n<=1e3)return n;{let t=n/1e3;return t=Number(t.toFixed(1)),t+"k"}}const j=async()=>{try{const n=`欢迎访问博客文章：${l.value.articleTitle} 
通往地址：${y.VITE_FRONTEND_URL}${u.path}`;await navigator.clipboard.writeText(n),g.success("已复制分享链接")}catch{g.error("复制失败，请联系网站管理员")}};function te(){var n;$e.alert(`<pre>${(n=E.webInfo)==null?void 0:n.sidebarAnnouncement}</pre>`,"公告",{confirmButtonText:"关闭",closeOnPressEscape:!0,dangerouslyUseHTMLString:!0})}const k=x(!1),I=x(!1),q=n=>{k.value?Pe(1,l.value.id).then(t=>{t.code===200?(n.favoriteCount-=1,k.value=!1,g.info("取消收藏")):g.error(t.msg)}):je(1,l.value.id).then(t=>{t.code===200?(n.favoriteCount+=1,k.value=!0,g.success("收藏成功")):g.error(t.msg)})};function Y(n){I.value?qe(1,l.value.id).then(t=>{t.code===200?(n.likeCount-=1,I.value=!1,g.info("我会继续努力的")):g.error(t.msg)}):Ye(1,l.value.id).then(t=>{t.code===200?(n.likeCount+=1,I.value=!0,g.success("感谢你的认可")):g.error(t.msg)})}function le(){He(1,l.value.id).then(n=>{k.value=n.data===!0})}function oe(){ze(1,l.value.id).then(n=>{I.value=n.code===200})}window.addEventListener("scroll",Ve(()=>{window.requestAnimationFrame(ne)},40));const W=x("0%");function ne(){let n=document.documentElement.scrollHeight||document.body.scrollHeight,t=document.documentElement.clientHeight||document.body.clientHeight,V=n-t,_=document.documentElement.scrollTop||document.body.scrollTop,R=document.querySelector(".progress");R.style.width=_/V*100+"%",W.value=Math.floor(_/V*100)+"%"}const $=x(!1);function se(){$.value=!$.value}return(n,t)=>{var K;const V=Je,_=U,R=we,h=U,G=Ae,L=Ne,D=Be,ie=We,ae=Me,de=Le,re=Oe,ue=Ue,ce=Re,_e=Fe,ve=De,me=Se;return r(),c(B,null,[v(e("div",null,[o(_e,{"is-side-bar":""},{header:a(()=>[o(V)]),content:a(()=>{var i;return[t[20]||(t[20]=e("div",{class:"progress"},null,-1)),e("div",ut,[e("div",{class:"head_title",style:Q(`background-image: url('${l.value.articleCover}')`)},[e("div",ct,[e("div",_t,[e("div",null,s(l.value.categoryName),1),(r(!0),c(B,null,F(l.value.tags,p=>(r(),c("div",vt,"# "+s(p.tagName),1))),256))]),e("div",mt,s(l.value.articleTitle),1),e("div",pt,[e("div",null,"字数统计:"+s(A.value),1)]),e("div",gt,[e("div",null,"访问量:"+s(l.value.visitCount),1),e("div",null,"评论数:"+s(l.value.commentCount),1),e("div",null,"点赞量:"+s(l.value.likeCount),1),e("div",null,"收藏量:"+s(l.value.favoriteCount),1)]),e("div",ft,[e("div",null,"发布："+s(l.value.createTime),1),e("div",null,"更新："+s(l.value.updateTime),1)])])],4),e("div",null,[e("div",null,[o(d(X),{editorId:O,theme:d(b),modelValue:l.value.articleContent,"on-html-changed":P},null,8,["theme","modelValue"])]),o(R,{"border-style":"dashed","content-position":"left"},{default:a(()=>[e("div",ht,[o(_,{name:"author_statement"}),t[13]||(t[13]=e("span",{style:{"margin-left":"0.5em"}},"声明",-1))])]),_:1}),e("div",yt,[e("div",Et,[o(_,{name:"article_author"}),e("strong",null,"本文作者： "+s((i=d(E).webInfo)==null?void 0:i.webmasterName),1)]),e("div",Ct,[o(_,{name:"author_link"}),t[14]||(t[14]=e("strong",null,"本文链接： ",-1)),e("a",{class:"copyright_a",href:d(y).VITE_FRONTEND_URL+n.$route.path},s(d(y).VITE_FRONTEND_URL+n.$route.path),9,kt)]),e("div",It,[e("div",null,[o(_,{name:"author_copyright"}),t[15]||(t[15]=e("strong",null,"版权声明： ",-1))]),t[16]||(t[16]=e("div",{class:"license_text"},[f(" 本站所有文章除特别声明外，均采用   "),e("a",{class:"copyright_a",href:"https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh",target:"_blank"}," CC BY-NC-SA 4.0 "),f("   许可协议。转载请注明文章出处！ ")],-1))])])]),e("div",xt,[e("div",bt,[(r(!0),c(B,null,F(l.value.tags,p=>(r(),c("div",{key:p.id,onClick:ul=>n.$router.push(`/tags/${p.id}`)},"# "+s(p.tagName),9,Tt))),128))]),e("div",$t,[e("div",{onClick:t[0]||(t[0]=p=>Y(l.value))},[v(o(h,{name:"like"},null,512),[[m,!I.value]]),v(o(h,{name:"like-selected"},null,512),[[m,I.value]]),e("span",null,s(l.value.likeCount),1)]),e("div",{onClick:t[1]||(t[1]=p=>q(l.value))},[v(o(h,{name:"collection"},null,512),[[m,!k.value]]),v(o(h,{name:"collection-selected"},null,512),[[m,k.value]]),e("span",null,s(l.value.favoriteCount),1)]),e("div",{onClick:j},[o(h,{name:"share"}),t[17]||(t[17]=e("span",null,"分享",-1))])])]),e("div",null,[e("div",wt,[e("div",{onClick:t[2]||(t[2]=p=>n.$router.push(`/category/${l.value.categoryId}`))},s(l.value.categoryName),1)])]),e("div",At,[o(L,{class:"box-item",effect:"light",placement:"top"},{content:a(()=>[e("div",Nt,[e("div",null,[t[18]||(t[18]=f(" 支付宝 ")),o(G,{src:"https://image.kuailemao.xyz/blog/pay/%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%AF%E4%BB%98%E4%BA%8C%E7%BB%B4%E7%A0%81_.png"})])])]),default:a(()=>[e("div",null,[o(_,{name:"gift"}),t[19]||(t[19]=e("span",{class:"max-[540px]:hidden"},"ヾ(≧▽≦*)o！",-1))])]),_:1})]),e("div",Bt,[e("div",null,[l.value.preArticleId>0?(r(),c("div",St,[o(D,{onClick:t[3]||(t[3]=p=>n.$router.push(`/article/${l.value.preArticleId}`))},{default:a(()=>[f(" 上一篇："+s(l.value.preArticleTitle),1)]),_:1})])):w("",!0)]),e("div",null,[l.value.nextArticleId>0?(r(),c("div",Vt,[o(D,{onClick:t[4]||(t[4]=p=>n.$router.push(`/article/${l.value.nextArticleId}`))},{default:a(()=>[f(" 下一篇："+s(l.value.nextArticleTitle),1)]),_:1})])):w("",!0)])]),S.value?(r(),be(ie,{key:0,type:1,"like-type":2,"author-id":l.value.userId,"type-id":l.value.id},null,8,["author-id","type-id"])):w("",!0)])]}),information:a(()=>[o(ae),o(de,{title:"公告",prefixIcon:"announcement","suffix-icon":"jt_y",isDithering:!0,isArrow:!0,onInvoke:te},{default:a(()=>{var i;return[e("pre",Rt,""+s((i=d(E).webInfo)==null?void 0:i.sidebarAnnouncement)+`
        `,1)]}),_:1}),o(re),e("div",Dt,[e("div",Ft,[o(st)]),l.value.categoryId!==""?(r(),c("div",Mt,[o(ue,{categoryId:l.value.categoryId.toString(),articleId:d(u).params.id,title:"相关推荐","prefix-icon":"query_tasks"},null,8,["categoryId","articleId"])])):w("",!0)])]),footer:a(()=>[o(ce)]),_:1})],512),[[m,!$.value]]),v(e("div",Lt,[e("div",{onClick:t[5]||(t[5]=i=>$.value=!1),class:"z-10 w-[50px] h-[50px] bg-gray-200 hover:bg-gray-300 fixed top-[2em] right-[1em] lg:right-[5em] rounded flex items-center justify-center duration-300 cursor-pointer"},[o(_,{name:"exit_icon",style:{width:"25px",height:"25px"}})]),e("div",Ot,[e("div",{class:"head_title",style:Q(`background-image: url('${l.value.articleCover}')`)},[e("div",Ut,[e("div",Ht,[e("div",null,s(l.value.categoryName),1),(r(!0),c(B,null,F(l.value.tags,i=>(r(),c("div",zt,"# "+s(i.tagName),1))),256))]),e("div",Pt,s(l.value.articleTitle),1),e("div",jt,[e("div",null,"字数统计:"+s(A.value),1)]),e("div",qt,[e("div",null,"访问量:"+s(l.value.visitCount),1),e("div",null,"评论数:"+s(l.value.commentCount),1),e("div",null,"点赞量:"+s(l.value.likeCount),1),e("div",null,"收藏量:"+s(l.value.favoriteCount),1)]),e("div",Yt,[e("div",null,"发布："+s(l.value.createTime),1),e("div",null,"更新："+s(l.value.updateTime),1)])])],4),e("div",null,[e("div",null,[o(d(X),{editorId:O,theme:d(b),modelValue:l.value.articleContent,"on-html-changed":P},null,8,["theme","modelValue"])]),o(R,{"border-style":"dashed","content-position":"left"},{default:a(()=>[e("div",Wt,[o(_,{name:"author_statement"}),t[21]||(t[21]=e("span",{style:{"margin-left":"0.5em"}},"声明",-1))])]),_:1}),e("div",Gt,[e("div",Kt,[o(_,{name:"article_author"}),e("strong",null,"本文作者： "+s((K=d(E).webInfo)==null?void 0:K.webmasterName),1)]),e("div",Qt,[o(_,{name:"author_link"}),t[22]||(t[22]=e("strong",null,"本文链接： ",-1)),e("a",{class:"copyright_a",href:d(y).VITE_FRONTEND_URL+n.$route.path},s(d(y).VITE_FRONTEND_URL+n.$route.path),9,Xt)]),e("div",Jt,[e("div",null,[o(_,{name:"author_copyright"}),t[23]||(t[23]=e("strong",null,"版权声明： ",-1))]),t[24]||(t[24]=e("div",{class:"license_text"},[f(" 本站所有文章除特别声明外，均采用   "),e("a",{class:"copyright_a",href:"https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh",target:"_blank"}," CC BY-NC-SA 4.0 "),f("   许可协议。转载请注明文章出处！ ")],-1))])])]),e("div",Zt,[e("div",el,[(r(!0),c(B,null,F(l.value.tags,i=>(r(),c("div",{key:i.id,onClick:p=>n.$router.push(`/tags/${i.id}`)},"# "+s(i.tagName),9,tl))),128))]),e("div",ll,[e("div",{onClick:t[6]||(t[6]=i=>Y(l.value))},[v(o(h,{name:"like"},null,512),[[m,!I.value]]),v(o(h,{name:"like-selected"},null,512),[[m,I.value]]),e("span",null,s(l.value.likeCount),1)]),e("div",{onClick:t[7]||(t[7]=i=>q(l.value))},[v(o(h,{name:"collection"},null,512),[[m,!k.value]]),v(o(h,{name:"collection-selected"},null,512),[[m,k.value]]),e("span",null,s(l.value.favoriteCount),1)]),e("div",{onClick:j},[o(h,{name:"share"}),t[25]||(t[25]=e("span",null,"分享",-1))])])]),e("div",null,[e("div",ol,[e("div",{onClick:t[8]||(t[8]=i=>n.$router.push(`/category/${l.value.categoryId}`))},s(l.value.categoryName),1)])]),e("div",nl,[o(L,{class:"box-item",effect:"light",placement:"top"},{content:a(()=>[e("div",sl,[e("div",null,[t[26]||(t[26]=f(" 支付宝 ")),o(G,{src:"https://image.kuailemao.xyz/blog/pay/%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%AF%E4%BB%98%E4%BA%8C%E7%BB%B4%E7%A0%81_.png"})])])]),default:a(()=>[e("div",null,[o(_,{name:"gift"}),t[27]||(t[27]=e("span",{class:"max-[540px]:hidden"},"ヾ(≧▽≦*)o！",-1))])]),_:1})]),e("div",il,[e("div",null,[l.value.preArticleId>0?(r(),c("div",al,[o(D,{onClick:t[9]||(t[9]=i=>n.$router.push(`/article/${l.value.preArticleId}`))},{default:a(()=>[f(" 上一篇："+s(l.value.preArticleTitle),1)]),_:1})])):w("",!0)]),e("div",null,[l.value.nextArticleId>0?(r(),c("div",dl,[o(D,{onClick:t[10]||(t[10]=i=>n.$router.push(`/article/${l.value.nextArticleId}`))},{default:a(()=>[f(" 下一篇："+s(l.value.nextArticleTitle),1)]),_:1})])):w("",!0)])])])],512),[[m,$.value]]),o(rt,{id:O,"scroll-element":d(T),"is-show-move-catalog":C.value,"onUpdate:isShowMoveCatalog":t[11]||(t[11]=i=>C.value=i)},null,8,["scroll-element","is-show-move-catalog"]),v(o(ve,{"to-top":"","scroll-percentage":"","reading-mode":"","to-comment":"",onReadingMode:se},{scroll_percentage:a(()=>[f(s(W.value),1)]),_:1},512),[[m,!$.value]]),v(e("div",null,[o(me,{position:"bottom",offset:200},{default:a(()=>[o(L,{effect:"light",content:"显示目录",placement:"right"},{default:a(()=>[e("div",{class:"move_catalog_btn",onClick:t[12]||(t[12]=i=>C.value=!0)},[o(_,{name:"directory",class:"move_catalog_svg",width:"30",height:"30"})])]),_:1})]),_:1})],512),[[m,!$.value]])],64)}}});const yl=z(rl,[["__scopeId","data-v-14e3d78b"]]);export{yl as default};
