import{_ as k}from"./index-77ed39d5.js";import{_ as C}from"./index-03ebed95.js";import{g as T,_ as L}from"./index-f983387b.js";import{A as w,r as g,f as b,n as A,o as c,c as r,q as h,y as v,l as o,F as d,p as y,Q as E,t as u}from"./.pnpm-a60ec0da.js";const $={class:"timeline"},q={class:"year"},S=["onClick","data-text"],B={class:"content"},I=["src"],D={class:"content-title"},F={class:"content-desc"},H=w({__name:"index",setup(M){function x(s){return s=s.map(e=>(e.articleContent=e.articleContent.replace(/[*#>`~\-\\[\]()\s]|(\n\n)/g,""),e.articleContent=e.articleContent.substring(0,60)+"...",e.createTime=e.createTime.substring(0,10),e)),E(()=>s.reduce((e,n)=>{const t=new Date(n.createTime).getFullYear();return e[t]||(e[t]=[]),e[t].push(n),e},{})).value}const m=g(null),f=g([]);return b(async()=>{await T().then(s=>{f.value=x(s.data)}),await A(()=>{const s=m.value,l=s.querySelectorAll(".item"),e=Array.from(l);e[0].classList.add("item--active"),s.style.backgroundImage=`url(${e[0].querySelector(".img").src})`,window.addEventListener("scroll",()=>{const n=window.pageYOffset;e.forEach((t,i)=>{const a=t.offsetTop,p=t.offsetHeight+t.offsetTop;i===e.length-2&&n>a+t.offsetHeight/2?(e.forEach(_=>_.classList.remove("item--active")),s.style.backgroundImage=`url(${e[e.length-1].querySelector(".img").src})`,e[e.length-1].classList.add("item--active")):n<=p-10&&n>=a&&(s.style.backgroundImage=`url(${t.querySelector(".img").src})`,e.forEach(_=>_.classList.remove("item--active")),t.classList.add("item--active"))})})})}),(s,l)=>{const e=C,n=k;return c(),r("div",null,[h(n,{"only-father-container":""},{banner:v(()=>[h(e,{title:"时间轴",subtitle:"TimeLine"})]),content:v(()=>[o("div",{class:"shell",ref_key:"shellRef",ref:m},[o("div",$,[(c(!0),r(d,null,y(f.value,(t,i)=>(c(),r(d,{key:t.id},[o("div",q,"--"+u(i)+"--",1),(c(!0),r(d,null,y(t,a=>(c(),r("div",{class:"item",onClick:p=>s.$router.push(`/article/${a.id}`),"data-text":a.createTime},[o("div",B,[o("img",{class:"img",src:a.articleCover},null,8,I),o("h2",D,u(a.articleTitle),1),o("p",F,u(a.articleContent),1)])],8,S))),256))],64))),128))])],512)]),_:1})])}}});const O=L(H,[["__scopeId","data-v-998e7768"]]);export{O as default};
